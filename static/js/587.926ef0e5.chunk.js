"use strict";(self.webpackChunkmusicgame=self.webpackChunkmusicgame||[]).push([[587],{8178:function(e,n,t){t.d(n,{Z:function(){return s}});var a=t(1979),o=t(7012),r=t(6151),i=t(184);function s(e){var n=e.children,t=e.onClick,s="dark"===localStorage.colorTheme?"255":"0",c=(0,a.Z)({palette:{mode:localStorage.colorTheme,primary:{light:"#757ce8",main:"#3f50b5",dark:"#002884"}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif'},components:{MuiButton:{styleOverrides:{root:{fontWeight:600,marginBottom:"0.5rem",justifyContent:"left",padding:"0.5rem 1.5rem",textTransform:"none",backgroundColor:"rgba(".concat(s,", ").concat(s,", ").concat(s,", 0.05)"),color:getComputedStyle(document.body).getPropertyValue("--text"),marginRight:"0.5rem"}}}}});return(0,i.jsx)(o.Z,{theme:c,children:(0,i.jsx)(r.Z,{onClick:t,children:n})})}},3413:function(e,n,t){t.d(n,{Z:function(){return c}});var a="StatModule_statModuleOuter__Xu691",o="StatModule_statModuleOuterDisplay__3jPHx",r="StatModule_title__KWTPn",i="StatModule_value__rT9A2",s=t(184);function c(e){var n=e.Title,t=e.Value,c=e.Display;return(0,s.jsxs)("div",{className:c?o:a,children:[(0,s.jsx)("span",{className:i,children:t}),(0,s.jsx)("span",{className:r,children:n})]})}},9064:function(e,n,t){var a=t(408);n.Z=function(e){return new Promise((function(n){var t=(0,a.N8)();(0,a.jM)((0,a.iH)(t,e),(function(e){return n(e.val())}))}))}},8420:function(e,n,t){var a=t(408);t(3473);n.Z=function(e,n){return new Promise((function(t){var o=(0,a.N8)();(0,a.t8)((0,a.iH)(o,e),n).then((function(){return t("completed")}))}))}},9587:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var a=t(885),o=t(2791),r=t(3473),i=t(6871),s=t(9201),c=t(184),u=(0,s.Z)((0,c.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite"),l=t(8178),d=t(408);function m(){return new Promise((function(e){var n=(0,d.iH)((0,d.N8)());(0,d.U2)((0,d.iU)(n,"songs/numSongs")).then((function(t){var a=t.val(),o=Math.floor(Math.random()*a-1);-1===o&&(o=0),(0,d.U2)((0,d.iU)(n,"songs/songList/".concat(o))).then((function(n){n=n.val(),e([n,o])}))}))}))}var h={gameContainer:"Game_gameContainer__e6ith",coverInput:"Game_coverInput__dHni-",gameOuter:"Game_gameOuter__HepEQ",gameBottom:"Game_gameBottom__Hhl9D",heart:"Game_heart__YAZba",faded:"Game_faded__E2R2I",heartAnimation:"Game_heartAnimation__T8HLW"},f="NameModule_nameModuleOuter__llC9F",g="NameModule_songName__znUiE",_="NameModule_songArtist__F9a2x",v="NameModule_wordMiddle__lxr2f",p="NameModule_incompletedWord__RYX-r";function x(e){var n=e.Name,t=e.FullName,a=e.Artist,o=e.onComplete,r=n.length,i=t.split(" "),s=[];i.forEach((function(e){return s.push(e.split(""))}));var u=0,l="";s.forEach((function(e){e.forEach((function(e,t){0!==t?(l+=u<r?n.split("")[u]:u===r?"|":"_",u+=1):l+=e})),l+=" "})),l.slice(0,-1);var d=l.includes("|");return d||o(l),(0,c.jsxs)("div",{className:f,children:[d?(0,c.jsxs)("span",{className:g,children:[(0,c.jsx)("span",{children:l.split("|")[0]}),(0,c.jsx)("span",{className:v}),l.split("|")[1].split("").map((function(e,n){return(0,c.jsx)("span",{className:"_"===e?p:void 0,children:e},"letter".concat(e).concat(n))}))]}):(0,c.jsx)("span",{className:g,children:l}),(0,c.jsx)("span",{className:_,children:a})]})}var j=t(3413),Z=t(9064),N=t(8420);function C(){var e=(0,o.useState)("Loading"),n=(0,a.Z)(e,2),t=n[0],s=n[1],d=(0,o.useState)("Loading"),f=(0,a.Z)(d,2),g=f[0],_=f[1],v=(0,o.useState)(2),p=(0,a.Z)(v,2),C=p[0],M=p[1],S=(0,o.useState)(""),y=(0,a.Z)(S,2),G=y[0],k=y[1],L=(0,o.useState)(!1),H=(0,a.Z)(L,2),T=H[0],b=H[1],A=(0,o.useState)(0),I=(0,a.Z)(A,2),O=I[0],w=I[1],E=(0,o.useState)("Loading"),F=(0,a.Z)(E,2),P=F[0],B=F[1],U=(0,i.s0)();(0,o.useEffect)((function(){var e=(0,r.v0)();(0,r.Aj)(e,(function(e){e?(s(e),(0,Z.Z)("/user/".concat(e.uid,"/highscore")).then((function(e){return B(e)})),(0,Z.Z)("/user/".concat(e.uid,"/currentGame")).then((function(n){null!==n?(w(n.score),(0,Z.Z)("/songs/songList/".concat(n.songIdx)).then((function(e){return _(e)}))):m().then((function(n){n[0];var a=n[1];console.log(t,t.uid),(0,N.Z)("/user/".concat(e.uid,"/currentGame"),{score:0,songIdx:a})}))}))):s("signedOut")}))}),[]);return"Loading"===t?(0,c.jsx)("div",{children:(0,c.jsx)("h3",{children:"Loading..."})}):"signedOut"===t?(0,c.jsxs)("div",{children:[(0,c.jsx)("h3",{children:"You must sign in"}),(0,c.jsx)(l.Z,{onClick:function(){return U("/account")},children:"Sign In"})]}):(0,c.jsxs)("div",{className:h.gameContainer,children:[(0,c.jsx)("input",{type:"text",className:h.coverInput,value:G,onChange:function(e){return k(e.target.value)},autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"}),"Loading"===g?(0,c.jsx)("h3",{children:"Loading..."}):(0,c.jsxs)("div",{className:h.gameOuter,children:[(0,c.jsx)("div",{}),(0,c.jsx)("div",{children:!T&&(0,c.jsx)(x,{Name:G,FullName:g.name,Artist:g.artist,onComplete:function(e){var n;k(""),e.trim()===g.name.trim()?(b(!0),w(n=2===C?O+3:O+1),M(2),m().then((function(e){var a=e[0],o=e[1];(0,N.Z)("/user/".concat(t.uid,"/currentGame"),{score:n,songIdx:o}).then((function(){_(a),b(!1)}))}))):(M(C-1),1===C&&(0,Z.Z)("/user/".concat(t.uid,"/numGames")).then((function(e){(0,N.Z)("/user/".concat(t.uid,"/game/").concat(e),{score:O,date:(new Date).getTime()}).then((function(){(0,N.Z)("/user/".concat(t.uid,"/numGames"),e+1).then((function(){(0,Z.Z)("/user/".concat(t.uid,"/highscore")).then((function(e){(0,N.Z)("/user/".concat(t.uid,"/currentGame"),null).then((function(){O>e||null===e?(0,N.Z)("/user/".concat(t.uid,"/highscore"),O).then((function(){(0,N.Z)("/leaderboard/".concat(t.uid),{name:t.displayName,highscore:O}).then((function(){U("/results")}))})):U("/results")}))}))}))}))})))}})}),(0,c.jsxs)("div",{className:h.gameBottom,children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(u,{className:h.heart}),(0,c.jsx)(u,{className:1===C?[h.heart,h.faded].join(" "):h.heart})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)(j.Z,{Title:"Highscore",Value:P}),(0,c.jsx)(j.Z,{Title:"Points",Value:O})]})]})]})]})}}}]);
//# sourceMappingURL=587.926ef0e5.chunk.js.map