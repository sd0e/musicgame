{"version":3,"file":"static/js/30.37ae36bb.chunk.js","mappings":"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","sources":["firebase/write.js","firebase/signInUser.js","firebase/signOutUser.js","firebase/deleteUserAccount.js","webpack://musicgame/./src/pages/Account.module.css?a27f","pages/Account.js"],"sourcesContent":["import { getDatabase, ref, set } from \"firebase/database\";\nimport { getAuth } from \"firebase/auth\";\n\nconst write = (path, data) => {\n\treturn new Promise(resolve => {\n\t\tconst db = getDatabase();\n\t\tset(ref(db, path), data).then(() => resolve('completed'));\n\t});\n}\n\nexport default write;","import {\n  getAuth,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  updateProfile\n} from \"firebase/auth\";\nimport write from \"./write\";\n\nconst auth = getAuth();\n\nconst signInUser = (option, email, password) => {\n  return new Promise((resolve, reject) => {\n    if (option === \"signIn\") {\n      signInWithEmailAndPassword(auth, email, password)\n        .then((result) => {\n          const user = result.user;\n          resolve(user);\n        })\n        .catch((error) => {\n          const errorMessage = error.message;\n          console.log(errorMessage);\n          reject(errorMessage);\n        });\n    } else {\n      createUserWithEmailAndPassword(auth, email, password)\n        .then((result) => {\n          const user = result.user;\n          const response = window.prompt(\"Enter a display name:\");\n          updateProfile(user, {\n            displayName: response ? response : \"User\"\n          }).then(() => resolve(user));\n          write(`/user/${user.uid}/numGames`, 0);\n        })\n        .catch((error) => {\n          const errorMessage = error.message;\n          console.log(errorMessage);\n          reject(errorMessage);\n        });\n    }\n  });\n};\n\nexport default signInUser;\n","import { getAuth, signOut } from \"firebase/auth\";\n\nconst auth = getAuth();\n\nconst signOutUser = () => {\n\treturn new Promise(resolve => {\n\t\tsignOut(auth).then(() => resolve());\n\t});\n}\n\nexport default signOutUser;","import { getAuth, deleteUser, reauthenticateWithCredential, EmailAuthProvider } from \"firebase/auth\";\nimport { getDatabase, ref, child, remove } from \"firebase/database\";\n\nconst deleteUserAccount = () => {\n\treturn new Promise(resolve => {\n\t\t// user not authenticated recently enough; signs in again\n\t\tconst email = window.prompt('Please confirm your email');\n\t\tconst password = window.prompt('Please confirm your password');\n\n\t\tconst credential = EmailAuthProvider.credential(\n\t\t\temail,\n\t\t\tpassword\n\t\t);\n\n\t\tconst uid = getAuth().currentUser.uid;\n\t\tconst db = getDatabase();\n\t\tremove(child(ref(db), `/user/${uid}`)).then(() => {\n\t\t\treauthenticateWithCredential(getAuth().currentUser, credential).then(() => {\n\t\t\t\tdeleteUser(getAuth().currentUser)\n\t\t\t\t.then(() => {\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t});\n\t\t})\n\t});\n}\n\nexport default deleteUserAccount;","// extracted by mini-css-extract-plugin\nexport default {\"email\":\"Account_email__NBXRW\"};","import { useState } from \"react\";\nimport { createTheme, ThemeProvider, TextField, Button } from \"@mui/material\";\n\nimport signInUser from \"../firebase/signInUser\";\nimport signOutUser from \"../firebase/signOutUser\";\nimport deleteUserAccount from \"../firebase/deleteUserAccount\";\nimport classes from \"./Account.module.css\";\n\nexport default function Account({ onStatusChange, setProgress, Status }) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const signIn = () => {\n    setProgress(20);\n    signInUser(\"signIn\", email, password).then((user) => {\n      setProgress(100);\n      onStatusChange(user);\n    });\n  };\n\n  const signUp = () => {\n    setProgress(20);\n    signInUser(\"signUp\", email, password).then((user) => {\n      setProgress(100);\n      onStatusChange(user);\n    });\n  };\n\n  const signOut = () => {\n    setProgress(20);\n    signOutUser().then(() => {\n      setProgress(100);\n      onStatusChange(\"signedOut\");\n    });\n  };\n\n  const confirmDelete = () => {\n    if (window.confirm(\"Are you sure you want to delete your account?\")) {\n      deleteUserAccount().then(() => signOut());\n    }\n  };\n\n  const bgRGBA = localStorage.colorTheme === \"dark\" ? \"255\" : \"0\";\n\n  const theme = createTheme({\n    palette: {\n      mode: localStorage.colorTheme,\n      primary: {\n        light: \"#757ce8\",\n        main: \"#3f50b5\",\n        dark: \"#002884\"\n      }\n    },\n    typography: {\n      fontFamily: `\"Inter\", \"Roboto\", \"Helvetica\", \"Arial\", sans-serif`\n    },\n    components: {\n      MuiButton: {\n        styleOverrides: {\n          root: {\n            fontWeight: 600,\n            marginBottom: \"0.5rem\",\n            justifyContent: \"left\",\n            padding: \"0.5rem 1.5rem\",\n            textTransform: \"none\",\n            backgroundColor: `rgba(${bgRGBA}, ${bgRGBA}, ${bgRGBA}, 0.05)`,\n            color: getComputedStyle(document.body).getPropertyValue(\"--text\"),\n            marginRight: \"0.5rem\"\n          }\n        }\n      },\n      MuiTextField: {\n        styleOverrides: {\n          root: {\n            marginRight: \"0.5rem\"\n          }\n        }\n      }\n    }\n  });\n\n  return (\n    <ThemeProvider theme={theme}>\n      <h3>Account</h3>\n      {Status === \"signedOut\" ? (\n        <div>\n          <form style={{ marginBottom: \"1.5rem\" }}>\n            <TextField\n              type=\"text\"\n              label=\"Email\"\n              value={email}\n              onInput={(e) => setEmail(e.target.value)}\n              autoComplete=\"username\"\n              variant=\"outlined\"\n            />\n            <TextField\n              type=\"password\"\n              label=\"Password\"\n              value={password}\n              onInput={(e) => setPassword(e.target.value)}\n              autoComplete=\"current-password\"\n              variant=\"outlined\"\n            />\n          </form>\n          <Button onClick={signIn}>Sign In</Button>\n          <Button onClick={signUp}>Sign Up</Button>\n        </div>\n      ) : (\n        <div>\n          <h2>Welcome back, {Status.displayName}</h2>\n          <span className={classes.email}>{Status.email}</span>\n          <Button onClick={signOut}>Sign Out</Button>\n          <Button onClick={confirmDelete}>Delete Account</Button>\n        </div>\n      )}\n    </ThemeProvider>\n  );\n}\n"],"names":["path","data","Promise","resolve","db","getDatabase","set","ref","then","auth","getAuth","option","email","password","reject","signInWithEmailAndPassword","result","user","catch","error","errorMessage","message","console","log","createUserWithEmailAndPassword","response","window","prompt","updateProfile","displayName","write","uid","signOut","credential","EmailAuthProvider","currentUser","remove","child","reauthenticateWithCredential","deleteUser","Account","onStatusChange","setProgress","Status","useState","setEmail","setPassword","signOutUser","bgRGBA","localStorage","colorTheme","theme","createTheme","palette","mode","primary","light","main","dark","typography","fontFamily","components","MuiButton","styleOverrides","root","fontWeight","marginBottom","justifyContent","padding","textTransform","backgroundColor","color","getComputedStyle","document","body","getPropertyValue","marginRight","MuiTextField","ThemeProvider","style","TextField","type","label","value","onInput","e","target","autoComplete","variant","Button","onClick","signInUser","className","classes","confirm","deleteUserAccount"],"sourceRoot":""}